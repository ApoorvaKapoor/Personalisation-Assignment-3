<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.0.0/dist/tf.min.js"></script>
    <script>
      var MODEL_URL = './model.json';
      var loadedModel;
      tf.loadGraphModel(MODEL_URL).then((model)=> {
        //Code to make prediction ///////
        loadedModel = model
        console.log("loaded model")
        var customerHistory = {
          item_id:tf.tensor([[1,2,3,4,5]],[1,5],"int32"),
          nb_days:tf.tensor([[4,5,6,7,8]],[1,5],"int32")
        }
        model.executeAsync(customerHistory).then((result)=> {
          console.log("made prediction")
          var finalProbs = result.slice([0,4]).reshape([-1])
          console.log(finalProbs.shape)
          var result = finalProbs.argMax()  // or tf.argMax(x)
          var maxpr = document.getElementById("maxprob"); 
          console.log(maxpr.innerHTML)
          maxpr.innerHTML = result 
          //////////////////
          //document.getElementById("imrec").style.visibility = "visible"
          
          
          //var recim = document.getElementById("imrec")//.style.visibility = "visible"; 
          var recim = document.getElementById('imrec');
          //recim.innerHTML = 'blue_boots.jpg'
          /*const element = document.getElementById("imrec");
          if (element.hasAttribute("hidden")) {
          element.setAttribute("hidden", "src='blue_boots.jpg'");
          }
          */
          if (recim.style.visibility === 'hidden') {
          recim.style.visibility = 'visible';
          } else {
          recim.style.visibility = 'hidden';
          }
          

          //img = loadImage('w6web/blue_boots.jpg') 
        })
        /////////////////////////////////
      })}
    </script>
  </head>
  <p id = 'maxprob'> hello world!</p>
  </image>
  <button type="button" onclick="predict()">Click Me for the prediction!</button> 
  
</html>
